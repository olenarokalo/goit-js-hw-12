{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '44069289-55a8aa963762c475e8ab93eb8';\nconst baseUrl = 'https://pixabay.com/api/';\nexport const perPage = 15;\n\naxios.defaults.baseURL = baseUrl;\n\nexport const fetchImages = async (image = '', photosCurrentPage = 1) => {\n  const response = await axios.get(``, {\n    params: {\n      key: apiKey,\n      q: image,\n      image_type: `photo`,\n      orientation: `horizontal`,\n      safesearch: `true`,\n      per_page: perPage,\n    },\n  });\n\n  return response.data;\n};\n","export const createGalleryItem = images => {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n              width = \"360\"\n              height = \"200\"\n            />\n            <ul class=\"image-info\">\n              <li class=\"item-info\">Likes <span>${likes}</span></li>\n              <li class=\"item-info\">Views <span>${views}</span></li>\n              <li class=\"item-info\">Comments <span>${comments}</span></li>\n              <li class=\"item-info\">Downloads <span>${downloads}</span></li>\n            </ul>\n          </a>\n        </li>\n    `\n    )\n    .join('');\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport { createGalleryItem } from './js/render-functions.js';\nimport { perPage } from './js/pixabay-api.js';\n\nconst galleryElement = document.querySelector('.gallery-list');\nconst loader = document.querySelector('.loader');\nconst searchForm = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.js-load-more-btn');\n\nloadMoreBtn.style.display = 'none';\nlet newCurrentPage = 1;\nlet totalPages = 0;\nlet searchQuery = '';\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nsearchForm.addEventListener('submit', async e => {\n  e.preventDefault();\n  loader.style.display = 'inline-block';\n\n  newCurrentPage = 1;\n\n  searchQuery = e.target.elements.search.value.trim();\n  if (searchQuery === '') {\n    galleryElement.innerHTML = '';\n    e.target.reset();\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Search field cannot be empty!',\n      position: 'topRight',\n    });\n    loader.style.display = 'none';\n    return;\n  }\n  galleryElement.innerHTML = '';\n\n  try {\n    const imagesData = await fetchImages(searchQuery, newCurrentPage);\n    if (!imagesData.total) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    } else {\n      galleryElement.innerHTML = createGalleryItem(imagesData.hits);\n      lightbox.refresh();\n      totalPages = Math.ceil(imagesData.totalHits / perPage);\n      if (newCurrentPage < totalPages) {\n        loadMoreBtn.style.display = 'block';\n      } else {\n        loadMoreBtn.style.display = 'none';\n      }\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.style.display = 'none';\n    e.target.reset();\n  }\n});\n\nconst onLoadMorePress = async (event, searchQuery) => {\n  try {\n    loader.style.display = 'inline-block';\n\n    newCurrentPage++;\n\n    const { hits, totalHits } = await fetchImages(searchQuery, newCurrentPage);\n\n    galleryElement.insertAdjacentHTML('beforeend', createGalleryItem(hits));\n\n    lightbox.refresh();\n\n    totalPages = Math.ceil(totalHits / perPage);\n\n    if (newCurrentPage < totalPages) {\n      loadMoreBtn.style.display = 'none';\n      loadMoreBtn.removeEventListener('click', onLoadMorePress);\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      return;\n    }\n  } catch (error) {\n    console.error('Error loading more photos:', error);\n  } finally {\n    loader.style.display = 'none';\n  }\n};\n\nloadMoreBtn.addEventListener('click', () =>\n  onLoadMorePress(event, searchQuery)\n);\n"],"names":["apiKey","baseUrl","perPage","axios","fetchImages","image","photosCurrentPage","createGalleryItem","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryElement","loader","searchForm","loadMoreBtn","newCurrentPage","totalPages","searchQuery","lightbox","SimpleLightbox","e","iziToast","imagesData","error","onLoadMorePress","event","hits","totalHits"],"mappings":"owBAEA,MAAMA,EAAS,qCACTC,EAAU,2BACHC,EAAU,GAEvBC,EAAM,SAAS,QAAUF,EAElB,MAAMG,EAAc,MAAOC,EAAQ,GAAIC,EAAoB,KAC/C,MAAMH,EAAM,IAAI,GAAI,CACnC,OAAQ,CACN,IAAKH,EACL,EAAGK,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAUH,CACX,CACL,CAAG,GAEe,KCpBLK,EAAoBC,GACxBA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,0CACkCL,CAAa;AAAA;AAAA;AAAA,qBAGlCD,CAAY;AAAA,qBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,kDAKyBC,CAAK;AAAA,kDACLC,CAAK;AAAA,qDACFC,CAAQ;AAAA,sDACPC,CAAS;AAAA;AAAA;AAAA;AAAA,KAK1D,EACA,KAAK,EAAE,ECtBNC,EAAiB,SAAS,cAAc,eAAe,EACvDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAc,SAAS,cAAc,mBAAmB,EAE9DA,EAAY,MAAM,QAAU,OAC5B,IAAIC,EAAiB,EACjBC,EAAa,EACbC,EAAc,GAElB,MAAMC,EAAW,IAAIC,EAAe,gBAAiB,CACnD,aAAc,MACd,aAAc,GAChB,CAAC,EAEDN,EAAW,iBAAiB,SAAU,MAAMO,GAAK,CAO/C,GANAA,EAAE,eAAc,EAChBR,EAAO,MAAM,QAAU,eAEvBG,EAAiB,EAEjBE,EAAcG,EAAE,OAAO,SAAS,OAAO,MAAM,OACzCH,IAAgB,GAAI,CACtBN,EAAe,UAAY,GAC3BS,EAAE,OAAO,QACTC,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,gCACT,SAAU,UAChB,CAAK,EACDT,EAAO,MAAM,QAAU,OACvB,MACD,CACDD,EAAe,UAAY,GAE3B,GAAI,CACF,MAAMW,EAAa,MAAMvB,EAAYkB,EAAaF,CAAc,EAC3DO,EAAW,OAQdX,EAAe,UAAYT,EAAkBoB,EAAW,IAAI,EAC5DJ,EAAS,QAAO,EAChBF,EAAa,KAAK,KAAKM,EAAW,UAAYzB,CAAO,EACjDkB,EAAiBC,EACnBF,EAAY,MAAM,QAAU,QAE5BA,EAAY,MAAM,QAAU,QAb9BO,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,UAClB,CAAO,CAWJ,OAAQE,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRX,EAAO,MAAM,QAAU,OACvBQ,EAAE,OAAO,OACV,CACH,CAAC,EAED,MAAMI,EAAkB,MAAOC,EAAOR,IAAgB,CACpD,GAAI,CACFL,EAAO,MAAM,QAAU,eAEvBG,IAEA,KAAM,CAAE,KAAAW,EAAM,UAAAC,CAAW,EAAG,MAAM5B,EAAYkB,EAAaF,CAAc,EAQzE,GANAJ,EAAe,mBAAmB,YAAaT,EAAkBwB,CAAI,CAAC,EAEtER,EAAS,QAAO,EAEhBF,EAAa,KAAK,KAAKW,EAAY9B,CAAO,EAEtCkB,EAAiBC,EAAY,CAC/BF,EAAY,MAAM,QAAU,OAC5BA,EAAY,oBAAoB,QAASU,CAAe,EACxDH,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,EACD,MACD,CACF,OAAQE,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACrD,QAAY,CACRX,EAAO,MAAM,QAAU,MACxB,CACH,EAEAE,EAAY,iBAAiB,QAAS,IACpCU,EAAgB,MAAOP,CAAW,CACpC"}